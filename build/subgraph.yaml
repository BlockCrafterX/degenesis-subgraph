specVersion: 0.0.2
description: Tokemak Subgraph
repository: https://github.com/Tokemak/tokemak-subgraph
schema:
  file: schema.graphql
dataSources:
  - kind: ethereum/contract
    name: DefiRound
    network: mainnet
    source:
      address: "0x36C02dA8a0983159322a80FFE9F24b1acfF8B570"
      abi: DefiRound
      startBlock: 12883600
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - Contract
        - Token
        - Oracle
        - Gensis
        - User
        - Balance
        - WhiteList
        - SupportedTokens
        - FinalizedAsset
      abis:
        - name: DefiRound
          file: DefiRound/node_modules/@tokemak/contracts/artifacts/contracts/defi-round/DefiRound.sol/DefiRound.json
        - name: ERC20
          file: DefiRound/node_modules/@tokemak/contracts/artifacts/@openzeppelin/contracts/token/ERC20/ERC20.sol/ERC20.json
      eventHandlers:
        - event: Deposited(address,(address,uint256))
          handler: handleDeposit
        - event: Withdrawn(address,(address,uint256),bool)
          handler: handleWithdraw
        - event: SupportedTokensAdded((address,address,address,uint256)[])
          handler: handleSupportedTokens
        - event: GenesisTransfer(address,uint256)
          handler: handleGenesisTransfer
        - event: AssetsFinalized(address,address,uint256)
          handler: handleFinalizedAsset
        - event: WhitelistConfigured((bool,bytes32))
          handler: handleWhitelist
        - event: TreasuryTransfer((address,uint256)[])
          handler: handleTreasuryTransfer
        - event: RatesPublished((address,uint256,uint256)[])
          handler: handleRates
      file: DefiRound/DefiRound.wasm
